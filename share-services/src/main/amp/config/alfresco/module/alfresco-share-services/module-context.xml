<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

   <!-- -->
   <!-- Slingshot Data List REST API -->
   <!-- -->

   <bean parent="dictionaryModelBootstrap" depends-on="resourceBundles">
      <property name="models">
         <list>
            <!-- Share Data Lists model -->
            <value>alfresco/model/datalistModel.xml</value>
         </list>
      </property>
      <property name="labels">
         <list>
            <value>alfresco/messages/data-list-model</value>
         </list>
      </property>
   </bean>
   
   <!-- Download a datalist as Excel XLS / XLSX -->
   <bean id="webscript.org.alfresco.slingshot.datalists.list.get"
      class="org.alfresco.repo.web.scripts.datalist.DataListDownloadWebScript"
      parent="declarativeSpreadsheetWebScript">
      <property name="nodeService" ref="NodeService" />
      <property name="siteService" ref="SiteService" />
      <property name="namespaceService" ref="namespaceService" />
      <property name="dictionaryService" ref="dictionaryService" />
      <property name="modelOrder">
         <!-- These are taken from the forms config for now -->
         <map>
            <entry key="dl:todoList">
               <value>dl:todoTitle,dl:todoDueDate,dl:todoPriority,dl:todoStatus,dl:todoNotes,dl:assignee,dl:attachments</value>
            </entry>
            <entry key="dl:task">
               <value>cm:title,cm:description,dl:ganttStartDate,dl:ganttEndDate,dl:taskAssignee,dl:taskPriority,dl:taskStatus,dl:ganttPercentComplete,dl:taskComments,cm:attachments</value>
            </entry>
            <entry key="dl:simpletask">
               <value>cm:title,cm:description,dl:simpletaskDueDate,dl:simpletaskPriority,dl:simpletaskStatus,dl:simpletaskComments</value>
            </entry>
            <entry key="dl:contact">
               <value>dl:contactFirstName,dl:contactLastName,dl:contactEmail,dl:contactCompany,dl:contactJobTitle,dl:contactPhoneOffice,dl:contactPhoneMobile,dl:contactNotes</value>
            </entry>
            <entry key="dl:issue">
               <value>dl:issueID,cm:title,dl:issueAssignedTo,dl:issueStatus,dl:issuePriority,cm:description,dl:issueDueDate,dl:issueComments,cm:attachments</value>
            </entry>
            <entry key="dl:event">
               <value>cm:title,cm:description,dl:eventLocation,dl:eventStartDate,dl:eventEndDate,dl:eventRegistrations,cm:attachments,dl:eventNote</value>
            </entry>
            <entry key="dl:location">
               <value>cm:title,dl:locationAddress1,dl:locationAddress2,dl:locationAddress3,dl:locationZip,dl:locationState,dl:locationCountry,cm:description,cm:attachments</value>
            </entry>
            <entry key="dl:meetingAgenda">
               <value>dl:meetingAgendaRef,cm:title,cm:description,dl:meetingAgendaTime,dl:meetingAgendaOwner,cm:attachments</value>
            </entry>
            <entry key="dl:eventAgenda">
               <value>dl:eventAgendaRef,dl:eventAgendaStartTime,dl:eventAgendaEndTime,dl:eventAgendaSessionName,dl:eventAgendaPresenter,dl:eventAgendaAudience,cm:attachments,dl:eventAgendaNotes</value>
            </entry>
         </map>
      </property>
   </bean>
   
   <!--                                        -->
   <!--          Wiki Pages REST API           -->
   <!--                                        -->
   
   <!-- abstract wiki web script -->
   <bean id="abstractWikiWebScript" parent="webscript" abstract="true">
        <property name="nodeService" ref="NodeService"/>
        <property name="siteService" ref="SiteService"/>
        <property name="wikiService" ref="WikiService"/>
        <property name="personService" ref="PersonService"/>
        <property name="activityService" ref="activityService"/>
   </bean>

   <!-- Fetches the details of one wiki page -->
   <bean id="webscript.org.alfresco.slingshot.wiki.page.get"
         class="org.alfresco.repo.web.scripts.wiki.WikiPageGet"
         parent="abstractWikiWebScript">
   </bean>

   <!-- Fetches the contents of one wiki page at a specific version -->
   <bean id="webscript.org.alfresco.slingshot.wiki.version.get"
         class="org.alfresco.repo.web.scripts.wiki.WikiPageVersionGet"
         parent="abstractWikiWebScript">
      <property name="contentService" ref="ContentService" />
      <property name="versionService" ref="VersionService" />
   </bean>

   <!-- Creates and Edits wiki pages -->
   <bean id="webscript.org.alfresco.slingshot.wiki.page.put"
         class="org.alfresco.repo.web.scripts.wiki.WikiPagePut"
         parent="abstractWikiWebScript">
      <property name="versionService" ref="VersionService" />
   </bean>

   <!-- Renames a wiki page (changing the title and name) -->
   <bean id="webscript.org.alfresco.slingshot.wiki.move.post"
         class="org.alfresco.repo.web.scripts.wiki.WikiPageMovePost"
         parent="abstractWikiWebScript">
   </bean>

   <!-- Deletes a wiki page -->
   <bean id="webscript.org.alfresco.slingshot.wiki.page.delete"
         class="org.alfresco.repo.web.scripts.wiki.WikiPageDelete"
         parent="abstractWikiWebScript">
   </bean>
   
   <!-- Lists the Wiki Pages for a site -->
   <bean id="webscript.org.alfresco.slingshot.wiki.pagelist.get"
         class="org.alfresco.repo.web.scripts.wiki.WikiPageListGet"
         parent="abstractWikiWebScript">
      <property name="sysAdminParams" ref="sysAdminParams" />
   </bean>
   
   <!-- Share Content Download - post of an Activity before performing a Site download action -->
   <bean id="webscript.org.alfresco.slingshot.download.get" class="org.alfresco.slingshot.web.scripts.SlingshotContentGet" parent="webscript.org.alfresco.content.content.get">
      <property name="siteService" ref="SiteService" />
      <property name="poster" ref="activitiesPoster" />
      <property name="transactionHelper" ref="retryingTransactionHelper" />
   </bean>
   
   <!-- Node browser web script -->
   <bean id="webscript.org.alfresco.slingshot.node-browser.node-browser.get" parent="webscript"
         class="org.alfresco.slingshot.web.scripts.NodeBrowserScript">
      <property name="transactionService">
         <ref bean="TransactionService" />
      </property>
      <property name="nodeService">
         <ref bean="NodeService" />
      </property>
      <property name="dictionaryService">
         <ref bean="DictionaryService" />
      </property>
      <property name="searchService">
         <ref bean="SearchService" />
      </property>
      <property name="namespaceService">
         <ref bean="NamespaceService" />
      </property>
      <property name="permissionService">
         <ref bean="PermissionService" />
      </property>
      <property name="ownableService">
         <ref bean="OwnableService" />
      </property>
   </bean>
   
   <!-- AutoSuggest web script -->
   <bean id="webscript.org.alfresco.slingshot.search.auto-suggest-search.get" class="org.alfresco.repo.web.scripts.search.AutoSuggestSearchGet" parent="webscript">
      <property name="suggesterService" ref="suggesterService"/>
   </bean>
   
   <!-- Share URL webscript -->
   <bean id="webscript.org.alfresco.repository.site.site-share-view-url.get" class="org.alfresco.repo.web.scripts.site.SiteShareViewUrlGet" parent="webscript">
      <property name="nodeService" ref="NodeService"/>
      <property name="siteService" ref="SiteService"/>
      <property name="sysAdminParams" ref="sysAdminParams" />
      <property name="dictionaryService" ref="DictionaryService"/>
   </bean>

</beans>

